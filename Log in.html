<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Discord Bot Dashboard</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <!-- Bot icon manually set -->
    <img src="https://i.postimg.cc/MHWZgy2W/Untitled-design-7.png" alt="Bot Icon" id="bot-icon" />
    <h2 id="bot-name">Arch Angels</h2>
    <button id="show-dashboard">Dashboard</button>
    <button id="show-raid">Current Raid</button>
    <button id="show-commands">Commands</button>
    <button id="show-leaderboard">Leaderboard</button>

    <!-- Admin Features (only visible for admin) -->
    <% if (admin) { %>
      <button id="show-staff">Staff Commands</button>
      <button onclick="startRaid('snow')">Start Snow Island Raid</button>
      <button onclick="startRaid('jungle')">Start Jungle Island Raid</button>
      <button onclick="startRaid('dedu')">Start Dedu Island Raid</button>
      <button onclick="stopRaid('snow')">Stop Snow Island Raid</button>
      <button onclick="stopRaid('jungle')">Stop Jungle Island Raid</button>
      <button onclick="stopRaid('dedu')">Stop Dedu Island Raid</button>
    <% } %>
  </div>

  <!-- Log Out Button at the top-right -->
  <button id="log-out-btn" onclick="logout()">Log Out [‚ûî]</button>

  <div class="main-content">
    <!-- Dashboard Section -->
    <div class="page-section" id="dashboard">
      <div id="welcome">
        <img src="<%= userAvatarUrl %>" alt="User Avatar" />
        <h1>Welcome, <%= username %>!</h1>
        <p>This is our official website, developed by @BlakeO_o.</p>
        <p>Please show support by joining our discord‚û°Ô∏è<a href="https://discord.com/invite/A6xhTeGKJg" target="_blank">Arch Angels</a></p>!
      </div>
    </div>

    <!-- Current Raid Section -->
    <div class="page-section" id="current_raid" style="display: none;">
      <h1>Current Raid Status</h1>
      <div class="raid-box" id="dedu-island">
        <div class="raid-title">Dedu Island Raid Has Spawned!</div>
        <div class="raid-description">Will you reach the "King"?</div>
        <img src="https://i.postimg.cc/rwSNPy5m/Untitled-design-36.png" alt="Dedu Island" class="raid-image" />
        <div class="raid-footer">Discord.gg/A6xhTeGKJg</div>
      </div>
      <div class="raid-box" id="snow-island">
        <div class="raid-title">Snow Island Raid Has Spawned!</div>
        <div class="raid-description">The air turns to frost!</div>
        <img src="https://i.postimg.cc/BZcxGZ6P/Untitled-design-37.png" alt="Snow Island" class="raid-image" />
        <div class="raid-footer">Discord.gg/A6xhTeGKJg</div>
      </div>
      <div class="raid-box" id="jungle-island">
        <div class="raid-title">Jungle Island Raid Has Spawned!</div>
        <div class="raid-description">The beast monarch has started his attack!</div>
        <img src="https://i.postimg.cc/d0y4vmMq/Untitled-design-35.png" alt="Jungle Island" class="raid-image" />
        <div class="raid-footer">Discord.gg/A6xhTeGKJg</div>
      </div>
    </div>

    <!-- Bot Commands Section -->
    <div class="page-section" id="commands" style="display: none;">
      <h1>Bot Commands</h1>
      <div id="command-list">
        <% Object.keys(commands).forEach(category => { %>
          <h2><%= category %> Commands</h2>
          <div class="command-grid">
            <% commands[category].forEach(command => { %>
              <div class="command-box">
                <div class="command-title"><%= command.name %></div>
                <div class="command-description"><%= command.description %></div>
              </div>
            <% }); %>
          </div>
        <% }); %>
      </div>
    </div>

    <!-- Staff commands (visible only to admins) -->
    <% if (admin) { %>
      <div class="page-section" id="staff" style="display: none;">
        <h1>Staff Commands</h1>
        <div class="command-grid">
          <div class="command-box"><div class="command-title">/kick</div><div class="command-description">Kick a member from the server</div></div>
          <div class="command-box"><div class="command-title">/ban</div><div class="command-description">Ban a member from the server</div></div>
          <div class="command-box"><div class="command-title">/warn</div><div class="command-description">Warn a member for their actions</div></div>
          <div class="command-box"><div class="command-title">/mute</div><div class="command-description">Temporarily mute a member</div></div>
          <div class="command-box"><div class="command-title">/purge</div><div class="command-description">Delete messages in bulk</div></div>
        </div>
      </div>
    <% } %>
  </div>

  <div class="page-section" id="leaderboard" style="display: none;">
    <h1>üèÜ Leaderboard</h1>
    <div id="leaderboard-container">Loading...</div>
  </div>

  <!-- JS Scripts -->
  <script>
    function logout() {
      window.location.href = "/logout";  // Redirect to logout route
    }

    document.addEventListener('DOMContentLoaded', () => {
      const sections = document.querySelectorAll('.page-section');

      function showPage(pageId) {
        sections.forEach(section => section.style.display = 'none');
        const page = document.getElementById(pageId);
        if (page) {
          page.style.display = 'block';
        }
      }

      document.getElementById('show-dashboard').addEventListener('click', () => showPage('dashboard'));
      document.getElementById('show-raid').addEventListener('click', () => showPage('current_raid'));
      document.getElementById('show-commands').addEventListener('click', () => showPage('commands'));
      document.getElementById('show-leaderboard').addEventListener('click', () => showPage('leaderboard'));

      showPage('dashboard'); // Default page
    });
  </script>
</body>
</html>
